<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>每周学习任务记录</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- 登录页面 -->
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <h1>学习计划</h1>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="email">邮箱</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="login-btn" id="loginBtn">登录</button>
            </form>
            <div class="auth-toggle" id="toggleRegister">没有账户？点击注册</div>
        </div>
    </div>

    <!-- 注册页面 -->
    <div class="login-container" id="registerContainer" style="display: none;">
        <div class="login-box">
            <h1>注册账户</h1>
            <form class="login-form" id="registerForm">
                <div class="form-group">
                    <label for="regName">姓名</label>
                    <input type="text" id="regName" required>
                </div>
                <div class="form-group">
                    <label for="regEmail">邮箱</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">密码</label>
                    <input type="password" id="regPassword" required>
                </div>
                <button type="submit" class="login-btn" id="registerBtn">注册</button>
            </form>
            <div class="auth-toggle" id="toggleLogin">已有账户？点击登录</div>
        </div>
    </div>

    <!-- 应用主界面 -->
    <div class="app-container" id="appContainer">
        <!-- 用户信息栏 -->
        <div class="user-info">
            <div class="user-details">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div id="userName">用户</div>
                    <div id="userEmail" style="font-size: 0.8rem; color: var(--gray);">user@example.com</div>
                </div>
            </div>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> 退出登录
            </button>
        </div>

        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div>
                    <h1>学习计划</h1>
                    <p>记录每周学习任务</p>
                </div>
            </div>
            <ul class="weeks-list" id="weeksList">
                <!-- 周数目录将通过JavaScript动态生成 -->
            </ul>
            <button class="add-week-btn" id="addWeekBtn">
                <i class="fas fa-plus"></i> 添加新周
            </button>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">
            <div class="week-header">
                <h2 class="week-title" id="currentWeekTitle">第1周学习任务</h2>
                <div class="week-stats">
                    <div class="stat-box">
                        <div class="stat-value" id="totalTasks">0</div>
                        <div class="stat-label">总任务</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="completedTasks">0</div>
                        <div class="stat-label">已完成</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="progress">0%</div>
                        <div class="stat-label">进度</div>
                    </div>
                </div>
            </div>

            <div class="search-filter">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="搜索任务...">
                </div>
                <div class="filter-box">
                    <select id="statusFilter">
                        <option value="all">所有状态</option>
                        <option value="pending">未开始</option>
                        <option value="in-progress">进行中</option>
                        <option value="completed">已完成</option>
                    </select>
                </div>
            </div>

            <div class="tasks-container" id="tasksContainer">
                <!-- 任务卡片将通过JavaScript动态生成 -->
            </div>

            <button class="add-task-btn" id="addTaskBtn">
                <i class="fas fa-plus"></i> 添加新任务
            </button>
        </div>
    </div>

    <!-- 任务编辑模态框 -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">添加新任务</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <div class="form-group">
                        <label for="taskTitle">任务标题</label>
                        <input type="text" id="taskTitle" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">任务描述</label>
                        <textarea id="taskDescription" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="taskStatus">任务状态</label>
                        <select id="taskStatus" class="form-control">
                            <option value="pending">未开始</option>
                            <option value="in-progress">进行中</option>
                            <option value="completed">已完成</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskDate">日期</label>
                        <input type="date" id="taskDate" class="form-control" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" id="cancelTask">取消</button>
                <button class="btn btn-save" id="saveTask">保存</button>
            </div>
        </div>
    </div>

    <!-- 周编辑模态框 -->
    <div class="modal" id="weekModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="weekModalTitle">编辑周信息</h3>
                <button class="close-btn" id="closeWeekModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="weekForm">
                    <div class="form-group">
                        <label for="weekTitle">周标题</label>
                        <input type="text" id="weekTitle" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="weekDate">日期范围</label>
                        <input type="text" id="weekDate" class="form-control" placeholder="例如：2023-10-02 至 2023-10-08"
                            required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" id="cancelWeek">取消</button>
                <button class="btn btn-save" id="saveWeek">保存</button>
            </div>
        </div>
    </div>

    <!-- 删除确认对话框 -->
    <div class="confirm-dialog" id="confirmDialog">
        <div class="confirm-content">
            <div class="confirm-header">
                <h3>确认删除</h3>
            </div>
            <div class="confirm-body">
                <p id="confirmMessage">确定要删除这个任务吗？此操作无法撤销。</p>
            </div>
            <div class="confirm-footer">
                <button class="btn btn-no" id="cancelDelete">取消</button>
                <button class="btn btn-yes" id="confirmDelete">删除</button>
            </div>
        </div>
    </div>

    <!-- 加载指示器 -->
    <div class="loader" id="loader">
        <div class="spinner"></div>
        <div>同步数据中...</div>
    </div>

    <script>
        // Firebase配置 - 需要替换为你的实际配置
        const firebaseConfig = {
            apiKey: "AIzaSyCY_5EyIwQ-YG0uyzWJMqknLnt0TmTRjT8",
            authDomain: "lby199-37798.firebaseapp.com",
            projectId: "lby199-37798",
            storageBucket: "lby199-37798.firebasestorage.app",
            messagingSenderId: "960002392251",
            appId: "1:960002392251:web:b5003304517f8d460f699e",
            measurementId: "G-2E7WQ101P8"
        };
    </script>
    <script src="script.js"></script>
</body>

</html>